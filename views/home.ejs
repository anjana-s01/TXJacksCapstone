<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="css/home.css">
    
    <title>Employee Directory</title>

</head>

<% 
function formatPhoneNumber(phoneNumberString) {
    var cleaned = ('' + phoneNumberString).replace(/\D/g, '')
    var match = cleaned.match(/^(\d{3})(\d{3})(\d{4})$/)
    if (match) {
      return '(' + match[1] + ') ' + match[2] + '-' + match[3]
    }
    return null
  }
  %>

<body>
    
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <div class="row">
       
        <div class="logo container col-2">
            <img class="pic" src="../img/testing.webp" alt="logo">
            <div class="container sections">

                <ul class="links">
                    <li><a href="/home">Employees</a></li>
                    <li><a href="/add">Add Employees</a></li>
                    <!-- <li><a href="#">Announcements</a></li> -->
                    <li><a href="/settings">Settings</a></li>
                    <li><a href="/tipout">Tipout</a></li>
                    <li><a href="/logout">Logout</a></li>
                </ul>
            </div>
        </div>

        <div class="container col emp">
          <div class="container directory">
            <h2 class="text-center">Employee Directory</h2>
            <div class="shadow card search mx-auto">
                    <h5 class="card-header">Employee Search</h5>
                
                <div class="card-body">
                <form action="/home" method="GET">
                    <div class="row">
                     <div class="col-5">
                        <h5 class="card-title">Employee ID</h5>
                        <input type="text" name = "empID">
                     </div>
                     <div class="col-2">
                         <h5>OR</h5>
                     </div>
                      <div class="col-5">
                        <h6 class="card-title">First Name</h6>
                        <input type="text" name = "firstName">
                        <h6 class="card-title" style="padding-top: 7px;">Last Name</h6>
                        <input type="text" name = "lastName">
                      </div>

                     </div>
                    <button type="submit" class="btn btn-primary">Search</button>
                </form>

                </div>
                
            </div>
                    
          <div class="container employee-cards mx-auto">
            <div class="row mx-auto">

                <% Employees.forEach(Employee => { %>    
                <div class="employee card shadow col-3 mx-4 my-4">
                    <div class="card-body emp-cards">
                    <h5 class="card-title"><%= Employee.f_name + " " + Employee.l_name %></h5>
                    <p class="card-text">Position: <%= Employee.def_pos %> </p>
                    <p class="card-text">Phone Number: <br/><%= formatPhoneNumber(Employee.cell_num) %> </p>
                    <p class="card-text">Email: <br/> <%= Employee.email %></p>
                        <a href="/<%= Employee.id %>" class=" btn btn-primary">View Profile</a>
                    </div>
                </div>
                <% }) %>    
            </div>
          </div>
            
        </div>   
        
    </div>

    </body>
</html>